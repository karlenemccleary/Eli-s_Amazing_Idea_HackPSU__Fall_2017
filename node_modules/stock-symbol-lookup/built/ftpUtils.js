"use strict";
var Client = require("ftp");
var ftpUtils = {
    fetchFile: function (file) {
        var ftpClient = new Client(), protocol = 'ftp://', host = 'ftp.nasdaqtrader.com', ftpDir = '/SymbolDirectory/', ftpOptions = {
            host: host
        };
        console.log('Fetch ' + file);
        return new Promise(function (resolve, reject) {
            ftpClient.on('ready', function () {
                var data = '';
                ftpClient.get(ftpDir + file, function (err, stream) {
                    if (err) {
                        reject(err);
                    }
                    stream.once('close', function () {
                        ftpClient.end();
                        resolve(data);
                    });
                    stream.on('data', function (buffer) {
                        data += buffer.toString();
                    });
                });
            });
            ftpClient.connect(ftpOptions);
        });
    }
};
exports.ftpUtils = ftpUtils;
